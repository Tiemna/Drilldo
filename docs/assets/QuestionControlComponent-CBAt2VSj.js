import{_ as g,u as I,Q as S,a as _,s as m,o as u,c as l,b as r,d as n,e as v,w as j,v as q,t as w,l as y}from"./index-Bw482TU5.js";const J={class:"question-control"},O={class:"controls-container"},Q={class:"slider-container"},U=["max","disabled"],h={class:"slider-index"},B={key:0,class:"data-container"},D={__name:"QuestionControlComponent",setup(L){const p=window.MathJax,o=I(S),i=_(),{index:c}=m(i),{viewMode:f}=m(i),{editMode:b}=m(i),{questions:d}=m(i);async function x(){const e=d.value[c.value].id;o.save({id:e,showResults:!0}),f.value||(o.find(e).score===o.find(e).maxScore?o.save({id:e,numCorrect:Number(o.find(e).numCorrect)+1}):o.save({id:e,numIncorrect:Number(o.find(e).numIncorrect)+1})),await y(),p.typeset()}async function C(){const e=d.value[c.value].id;o.find(e).showResults?i.next():x(),await y(),p.typeset()}function k(){i.previous()}function R(){let e=JSON.parse(JSON.stringify(o.all()));e.forEach(function(t,s){e[s]={number:t.number,numCorrect:t.numCorrect,numIncorrect:t.numIncorrect}}),e=e.sort((t,s)=>t.number-s.number),N(JSON.stringify(e,null,2),"text/json","stats.json")}function N(e,t,s){var M=new Blob([e],{type:t}),a=document.createElement("a");a.download=s,a.href=URL.createObjectURL(M),a.dataset.downloadurl=[t,a.download,a.href].join(":"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){URL.revokeObjectURL(a.href)},1500)}return(e,t)=>(u(),l("div",J,[r("div",O,[n(b)?v("",!0):(u(),l("button",{key:0,class:"button",onClick:t[0]||(t[0]=s=>k())},t[5]||(t[5]=[r("span",{class:"but-text"},"Previous",-1)]))),r("div",Q,[j(r("input",{class:"slider",type:"range",min:"0",max:n(d).length-1,step:"1","onUpdate:modelValue":t[1]||(t[1]=s=>n(i).index=s),disabled:!n(i).viewMode&&!n(i).editMode},null,8,U),[[q,n(i).index]]),r("div",h,w(1+Number(n(c)))+"/"+w(n(d).length),1)]),n(b)?v("",!0):(u(),l("button",{key:1,class:"button",onClick:t[2]||(t[2]=s=>C())},t[6]||(t[6]=[r("span",{class:"but-text"},"Next",-1)])))]),!n(f)&&!n(b)?(u(),l("div",B,[n(o).find(n(d)[n(c)].id).showResults?v("",!0):(u(),l("button",{key:0,class:"button data",onClick:t[3]||(t[3]=s=>x())},t[7]||(t[7]=[r("span",{class:"but-text"},"Results",-1)]))),r("button",{class:"button data",onClick:t[4]||(t[4]=s=>R())},t[8]||(t[8]=[r("span",{class:"but-text"},"Download stats",-1)]))])):v("",!0)]))}},$=g(D,[["__scopeId","data-v-1147289f"]]);export{$ as Q};
