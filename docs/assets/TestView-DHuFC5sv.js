import{_ as I,u as k,a as M,s as g,h as c,r as N,c as p,b as o,w,v as x,i as _,d as i,f as V,e as Q,g as R,Q as T,o as d}from"./index-gqdHk_h4.js";import{Q as B}from"./QuestionComponent-rQWSciIW.js";import{Q as J}from"./QuestionControlComponent-CX5lyNtS.js";const O={class:"view-container"},E={key:0,class:"test-selector"},U={class:"form"},$={class:"form"},D={class:"form"},j={key:1,class:"test"},z={class:"test-container"},F={__name:"TestView",setup(G){const s=k(T),a=M();s.where("showResults",!0).update({showResults:!1}),s.where("score",r=>r>=1).update({score:0}),s.where("maxScore",r=>r>=1).update({maxScore:0}),a.index=0,a.showMobileMenu=!1,a.viewMode=!1,a.editMode=!1;const{index:h}=g(a),{questions:m}=g(a),n=c(s.all().length),u=c(4),v=c(!0),f=c(!1);s.all().length===0&&N.push("/");function C(){const r=s.with("answers").get();v.value?r.sort((e,t)=>e.numIncorrect+e.numCorrect===0&&t.numIncorrect+t.numCorrect!==0||e.numIncorrect+e.numCorrect!==0&&t.numIncorrect+t.numCorrect===0?e.numIncorrect+e.numCorrect<t.numIncorrect+t.numCorrect?-1:1:e.numIncorrect!==t.numIncorrect?e.numIncorrect>t.numIncorrect?-1:1:e.numCorrect!==t.numCorrect?e.numCorrect<t.numCorrect?-1:1:Math.random()>.5?1:-1):r.sort((e,t)=>Math.random()>.5?1:-1),n.value>=0&&(r.length=n.value,r.sort((e,t)=>Math.random()>.5?1:-1)),r.forEach(function(e){if(e.answers.sort((l,y)=>Math.random()>.5?1:-1),u.value>0&&u.value<e.answers.length){var t=JSON.parse(JSON.stringify(e.answers));if(e.answers.some(l=>l.correct)){for(t.length=u.value;!t.some(l=>l.correct);)t=JSON.parse(JSON.stringify(e.answers)),t.sort((l,y)=>Math.random()>.5?1:-1),t.length=u.value;e.answers=t}else t.length=u.value}e.maxScore=0,e.answers.forEach(function(l){l.correct&&e.maxScore++}),s.where("id",e.id).update({maxScore:e.maxScore})}),m.value=r,f.value=!f.value}function S(){n.value>s.all().length?n.value=s.all().length:n.value<0&&(n.value=1)}function b(){n.value<0&&(n.value=0)}return(r,e)=>(d(),p("div",O,[f.value?(d(),p("div",j,[e[11]||(e[11]=o("h1",null,"Testing your knowledge",-1)),o("div",z,[i(m).length>=1?(d(),V(B,{key:i(m)[i(h)].id,question:i(m)[i(h)]},null,8,["question"])):Q("",!0),R(J)])])):(d(),p("div",E,[e[10]||(e[10]=o("h1",null,"Create your own test:",-1)),o("div",U,[e[6]||(e[6]=o("span",null,"Select number of questions to test:",-1)),w(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),type:"number",onInput:e[1]||(e[1]=t=>S())},null,544),[[x,n.value]])]),o("div",$,[e[7]||(e[7]=o("span",null," Select maximum number of answers to be shown per question (0 to show all) ",-1)),w(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),type:"number",onInput:e[3]||(e[3]=t=>b())},null,544),[[x,u.value]])]),o("div",D,[e[8]||(e[8]=o("span",null," Do you want to use statistics to prefer questions where you make mistakes more often? ",-1)),w(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>v.value=t),type:"checkbox"},null,512),[[_,v.value]])]),o("button",{class:"button",onClick:e[5]||(e[5]=t=>C())},e[9]||(e[9]=[o("span",{class:"but-text"},"Start",-1)]))]))]))}},P=I(F,[["__scopeId","data-v-125cbb4d"]]);export{P as default};
