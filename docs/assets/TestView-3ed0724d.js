import{_ as M,u as b,a as N,s as S,i as v,r as V,o as _,c as p,b as o,w,v as x,j as Q,d as i,f as R,e as T,g as B,Q as J,p as O,h as E}from"./index-484a2111.js";import{Q as U}from"./QuestionComponent-ec8078eb.js";import{Q as $}from"./QuestionControlComponent-a90d3a5d.js";const c=d=>(O("data-v-d2154665"),d=d(),E(),d),D={class:"view-container"},j={key:0,class:"test-selector"},z=c(()=>o("h1",null,"Create your own test:",-1)),F={class:"form"},G=c(()=>o("span",null,"Select number of questions to test:",-1)),H={class:"form"},K=c(()=>o("span",null," Select maximum number of answers to be shown per question (0 to show all) ",-1)),L={class:"form"},P=c(()=>o("span",null," Do you want to use statistics to prefer questions where you make mistakes more often? ",-1)),W=c(()=>o("span",{class:"but-text"},"Start",-1)),X=[W],Y={key:1,class:"test"},Z=c(()=>o("h1",null,"Testing your knowledge",-1)),q={class:"test-container"},A={__name:"TestView",setup(d){const r=b(J),l=N();r.where("showResults",!0).update({showResults:!1}),r.where("score",s=>s>=1).update({score:0}),r.where("maxScore",s=>s>=1).update({maxScore:0}),l.index=0,l.showMobileMenu=!1,l.viewMode=!1,l.editMode=!1;const{index:g}=S(l),{questions:m}=S(l),n=v(r.all().length),a=v(4),f=v(!0),h=v(!1);r.all().length===0&&V.push("/");function C(){const s=r.with("answers").get();f.value?s.sort((e,t)=>e.numIncorrect+e.numCorrect===0&&t.numIncorrect+t.numCorrect!==0||e.numIncorrect+e.numCorrect!==0&&t.numIncorrect+t.numCorrect===0?e.numIncorrect+e.numCorrect<t.numIncorrect+t.numCorrect?-1:1:e.numIncorrect!==t.numIncorrect?e.numIncorrect>t.numIncorrect?-1:1:e.numCorrect!==t.numCorrect?e.numCorrect<t.numCorrect?-1:1:Math.random()>.5?1:-1):s.sort((e,t)=>Math.random()>.5?1:-1),n.value>=0&&(s.length=n.value,s.sort((e,t)=>Math.random()>.5?1:-1)),s.forEach(function(e){if(e.answers.sort((u,k)=>Math.random()>.5?1:-1),a.value>0&&a.value<e.answers.length){var t=JSON.parse(JSON.stringify(e.answers));if(e.answers.some(u=>u.correct)){for(t.length=a.value;!t.some(u=>u.correct);)t=JSON.parse(JSON.stringify(e.answers)),t.sort((u,k)=>Math.random()>.5?1:-1),t.length=a.value;e.answers=t}else t.length=a.value}e.maxScore=0,e.answers.forEach(function(u){u.correct&&e.maxScore++}),r.where("id",e.id).update({maxScore:e.maxScore})}),m.value=s,h.value=!h.value}function I(){n.value>r.all().length?n.value=r.all().length:n.value<0&&(n.value=1)}function y(){n.value<0&&(n.value=0)}return(s,e)=>(_(),p("div",D,[h.value?(_(),p("div",Y,[Z,o("div",q,[i(m).length>=1?(_(),R(U,{question:i(m)[i(g)],key:i(m)[i(g)].id},null,8,["question"])):T("",!0),B($)])])):(_(),p("div",j,[z,o("div",F,[G,w(o("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),onInput:e[1]||(e[1]=t=>I())},null,544),[[x,n.value]])]),o("div",H,[K,w(o("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>a.value=t),onInput:e[3]||(e[3]=t=>y())},null,544),[[x,a.value]])]),o("div",L,[P,w(o("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t)},null,512),[[Q,f.value]])]),o("button",{class:"button",onClick:e[5]||(e[5]=t=>C())},X)]))]))}},se=M(A,[["__scopeId","data-v-d2154665"]]);export{se as default};
